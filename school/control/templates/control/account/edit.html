{% extends base_template_name %}

{% block script %}
<script>
$(document).ready(function() {
    $('#id_username').attr('readonly', 'readonly');

    $('#id_manager').change(function() {
        if ($(this).is(":checked")) {
            var returnVal = confirm("你確定要把這個帳戶設為管理員?");
            $(this).attr("checked", returnVal);
        }
        $('#id_manager').val($(this).is(':checked'));
    });
});

</script>
{% endblock %}

{% block content %}
<div class="row">
  <div class="col-md-12">
    <div class="row">
      <div class="col-md-offset-2 col-md-5">
        <h3>{{page_title}}</h3>
      </div>
      <div class="col-md-2 buttom-wrapper">
        <a href="{% url 'control:account' %}" class="no-radius btn btn-primary btn-lg btn-block">上一頁</a>
      </div>
      <div class="col-md-3 buttom-wrapper">
        <a href="{% url 'control:main' %}" class="no-radius btn btn-primary btn-lg btn-block">回管理員首頁</a>
      </div>
    </div>
    <br>
    <div class="row">
      <div class="col-md-12">
        <form class="form-horizontal" role="form" method=post action="{% url 'control:accountEdit' id %}">
        {% csrf_token %}
        <div class="form-group">
          <label for="id_username" class="col-sm-2 control-label">
          {{ userForm.username.label }}
          </label>
          <div class="col-sm-5">
            {{ userForm.username }}
          </div>
          <div class="col-sm-5">
            <span class="text-danger">{{ userForm.username.errors }}{{ error }}</span>
          </div>
        </div>
        <div class="form-group">
          <label for="id_password" class="col-sm-2 control-label">
          {{ userForm.password.label }}
          </label>
          <div class="col-sm-5">
            {{ userForm.password }}
          </div>
          <div class="col-sm-5">
            <span class="text-info">留空為不修改密碼。</span>
          </div>
        </div>
        <div class="form-group">
          <label for="id_password2" class="col-sm-2 control-label">
          {{ userForm.password2.label }}
          </label>
          <div class="col-sm-5">
            {{ userForm.password2 }}
          </div>
          <div class="col-sm-5">
            <span class="text-info">留空為不修改密碼。</span>
            <span class="text-danger">{{ userForm.password2.errors }}</span>
          </div>
        </div>
        <div class="form-group">
          <label for="id_fullName" class="col-sm-2 control-label">
          {{ userProfileForm.fullName.label }}
          </label>
          <div class="col-sm-5">
            {{ userProfileForm.fullName }}
          </div>
          <div class="col-sm-5">
            <span class="text-danger">{{ userProfileForm.fullName.errors }}</span>
          </div>
        </div>
		<div class="form-group">
			<label class="col-sm-2 control-label" for="id_email">{{ userForm.email.label }}</label>
			<div class="col-sm-5">
				<div class="input-group">
					<span class="input-group-addon"><span class="glyphicon glyphicon-envelope"></span></span>
					{{ userForm.email }}
				</div>
			</div>
			<div class="col-sm-5">
                <span class="text-danger">{{ userForm.email.errors }}</span>
			</div>
		</div>
		{% if user.profile.type <= 1 %}
        <div class="form-group">
          <label for="id_manager" class="col-sm-2 control-label">
            設定為管理員
          </label>
          <div class="col-sm-5">
            <input type="checkbox" name="isManager" id="id_manager" {% if user.profile.type == 1 %} checked {% endif %}>
          </div>
          <div class="col-sm-5">
          </div>
        </div>
        <div class="form-group">
          <label for="id_ban" class="col-sm-2 control-label">
            停用帳號
          </label>
          <div class="col-sm-5">
            <input type="checkbox" name="isBan" id="id_ban" {% if not user.profile.isActive %} checked {% endif %}>
          </div>
          <div class="col-sm-5">
          </div>
        </div>
        {% endif %}
        <div class="form-group">
          <div class="col-sm-offset-2 col-sm-2">
            <button type="submit" class="btn btn-lg btn-block btn-info">
            送出
            </button>
          </div>
          <div class="col-sm-2">
          </div>
        </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}